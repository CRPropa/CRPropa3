\hypertarget{classcrpropa_1_1MagneticLens}{}\doxysection{Magnetic\+Lens Class Reference}
\label{classcrpropa_1_1MagneticLens}\index{MagneticLens@{MagneticLens}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a643cd62aed5c704da458d60bb603c326}\label{classcrpropa_1_1MagneticLens_a643cd62aed5c704da458d60bb603c326}} 
{\bfseries Magnetic\+Lens} ()
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a00fe2b9e680ef54314604383f4ad5543}\label{classcrpropa_1_1MagneticLens_a00fe2b9e680ef54314604383f4ad5543}} 
{\bfseries Magnetic\+Lens} (uint8\+\_\+t healpixorder)
\begin{DoxyCompactList}\small\item\em Constructs lens with predefined healpix order. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_afe8b3bb801ef96e978ddab414f8535cc}\label{classcrpropa_1_1MagneticLens_afe8b3bb801ef96e978ddab414f8535cc}} 
{\bfseries Magnetic\+Lens} (const string \&filename)
\begin{DoxyCompactList}\small\item\em Construct lens and load lens from file. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_aa6211e3c3afbb6179ed595c164c59814}\label{classcrpropa_1_1MagneticLens_aa6211e3c3afbb6179ed595c164c59814}} 
const \mbox{\hyperlink{classcrpropa_1_1Pixelization}{Pixelization}} \& {\bfseries get\+Pixelization} () const
\begin{DoxyCompactList}\small\item\em Returns the pixelization used. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a38c98dc48a252726583c5c23ada3d358}\label{classcrpropa_1_1MagneticLens_a38c98dc48a252726583c5c23ada3d358}} 
{\bfseries $\sim$\+Magnetic\+Lens} ()
\begin{DoxyCompactList}\small\item\em Default destructor. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classcrpropa_1_1MagneticLens_a7854f867ce85aed7cf05a4de7e3aae16}{transform\+Cosmic\+Ray}} (double rigidity, double \&phi, double \&theta)
\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_aaf082f466e832093d83553dcc1d90908}\label{classcrpropa_1_1MagneticLens_aaf082f466e832093d83553dcc1d90908}} 
bool {\bfseries transform\+Cosmic\+Ray} (double rigidity, \mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} \&p)
\begin{DoxyCompactList}\small\item\em Tries transform a cosmic ray with momentum vector p. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classcrpropa_1_1MagneticLens_a162c9d22dd25910cd5e8cc622c943407}{transform\+Model\+Vector}} (double $\ast$model, double rigidity) const
\item 
void \mbox{\hyperlink{classcrpropa_1_1MagneticLens_ade6860693addc8f4585314d4a2456129}{set\+Lens\+Part}} (const Model\+Matrix\+Type \&M, double rigidity\+Min, double rigidity\+Max)
\item 
void \mbox{\hyperlink{classcrpropa_1_1MagneticLens_a47603966d403181b3bfd4577f4142ab3}{load\+Lens}} (const string \&filename)
\item 
void \mbox{\hyperlink{classcrpropa_1_1MagneticLens_ae988fb8fef9974c11ef93767120e6df5}{normalize\+Lens}} ()
\item 
void \mbox{\hyperlink{classcrpropa_1_1MagneticLens_a46e75afd0737b2785de34fe0906dcf8a}{normalize\+Lensparts}} ()
\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a09e126e579c0e758fa82a2567580a816}\label{classcrpropa_1_1MagneticLens_a09e126e579c0e758fa82a2567580a816}} 
bool {\bfseries rigidity\+Covered} (double rigidity) const
\begin{DoxyCompactList}\small\item\em Checks if rigidity \mbox{[}Joule\mbox{]} is covered by lens. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classcrpropa_1_1MagneticLens_aa4d2ede0ccac44aa936592ea2c37d21d}{normalize\+Matrix\+Columns}} ()
\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a56a78b6e6cc179b886e66d15af90b0f0}\label{classcrpropa_1_1MagneticLens_a56a78b6e6cc179b886e66d15af90b0f0}} 
double {\bfseries get\+Minimum\+Rigidity} () const
\begin{DoxyCompactList}\small\item\em Returns minimum rigidity covered by lens, in eV. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_aa189be38fadf10bca005ac2326536de4}\label{classcrpropa_1_1MagneticLens_aa189be38fadf10bca005ac2326536de4}} 
double {\bfseries get\+Maximum\+Rigidity} () const
\begin{DoxyCompactList}\small\item\em Returns maximum rigidity covered by lens, in eV. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a3e66e331583b40489d851550d3e81a45}\label{classcrpropa_1_1MagneticLens_a3e66e331583b40489d851550d3e81a45}} 
double {\bfseries get\+Norm} ()
\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a1bdf8cddf4c8587eafb11493758ed857}\label{classcrpropa_1_1MagneticLens_a1bdf8cddf4c8587eafb11493758ed857}} 
\mbox{\hyperlink{classcrpropa_1_1LensPart}{Lens\+Part}} $\ast$ {\bfseries get\+Lens\+Part} (double rigidity) const
\begin{DoxyCompactList}\small\item\em Returns iterator to the lens part with rigidity Joule. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_aabdb173f5ca5b7409511f4ce31d9a46d}\label{classcrpropa_1_1MagneticLens_aabdb173f5ca5b7409511f4ce31d9a46d}} 
const std\+::vector$<$ \mbox{\hyperlink{classcrpropa_1_1LensPart}{Lens\+Part}} $\ast$ $>$ \& {\bfseries get\+Lens\+Parts} () const
\begin{DoxyCompactList}\small\item\em Returns all lens parts. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The lens for the galactic magnetic field. Note that the energies refer to protons (Z=1). To be used with other particles with a different charge number please select the rigidity accordingly. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a47603966d403181b3bfd4577f4142ab3}\label{classcrpropa_1_1MagneticLens_a47603966d403181b3bfd4577f4142ab3}} 
\index{MagneticLens@{MagneticLens}!loadLens@{loadLens}}
\index{loadLens@{loadLens}!MagneticLens@{MagneticLens}}
\doxysubsubsection{\texorpdfstring{loadLens()}{loadLens()}}
{\footnotesize\ttfamily void load\+Lens (\begin{DoxyParamCaption}\item[{const string \&}]{filename }\end{DoxyParamCaption})}

Loads a lens from a given file, containing lines like lensefile.\+MLDAT rigidity\+Min rigidity\+Max rigidities are given in logarithmic units \mbox{[}log10(E / eV)\mbox{]} \mbox{\Hypertarget{classcrpropa_1_1MagneticLens_ae988fb8fef9974c11ef93767120e6df5}\label{classcrpropa_1_1MagneticLens_ae988fb8fef9974c11ef93767120e6df5}} 
\index{MagneticLens@{MagneticLens}!normalizeLens@{normalizeLens}}
\index{normalizeLens@{normalizeLens}!MagneticLens@{MagneticLens}}
\doxysubsubsection{\texorpdfstring{normalizeLens()}{normalizeLens()}}
{\footnotesize\ttfamily void normalize\+Lens (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Normalizes the lens parts to the maximum of sums of columns of every lenspart. By doing this, the lens won\textquotesingle{}t distort the spectrum \mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a46e75afd0737b2785de34fe0906dcf8a}\label{classcrpropa_1_1MagneticLens_a46e75afd0737b2785de34fe0906dcf8a}} 
\index{MagneticLens@{MagneticLens}!normalizeLensparts@{normalizeLensparts}}
\index{normalizeLensparts@{normalizeLensparts}!MagneticLens@{MagneticLens}}
\doxysubsubsection{\texorpdfstring{normalizeLensparts()}{normalizeLensparts()}}
{\footnotesize\ttfamily void normalize\+Lensparts (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Normalizes the lens parts individually. Normalized this way, the lens generally distorts the spectrum of the sources, but deflects the UHECR more efficiently. \mbox{\Hypertarget{classcrpropa_1_1MagneticLens_aa4d2ede0ccac44aa936592ea2c37d21d}\label{classcrpropa_1_1MagneticLens_aa4d2ede0ccac44aa936592ea2c37d21d}} 
\index{MagneticLens@{MagneticLens}!normalizeMatrixColumns@{normalizeMatrixColumns}}
\index{normalizeMatrixColumns@{normalizeMatrixColumns}!MagneticLens@{MagneticLens}}
\doxysubsubsection{\texorpdfstring{normalizeMatrixColumns()}{normalizeMatrixColumns()}}
{\footnotesize\ttfamily void normalize\+Matrix\+Columns (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Normalizes all matrix columns -\/ the lens will then create fake anisotropies, but won\textquotesingle{}t drop particles \mbox{\Hypertarget{classcrpropa_1_1MagneticLens_ade6860693addc8f4585314d4a2456129}\label{classcrpropa_1_1MagneticLens_ade6860693addc8f4585314d4a2456129}} 
\index{MagneticLens@{MagneticLens}!setLensPart@{setLensPart}}
\index{setLensPart@{setLensPart}!MagneticLens@{MagneticLens}}
\doxysubsubsection{\texorpdfstring{setLensPart()}{setLensPart()}}
{\footnotesize\ttfamily void set\+Lens\+Part (\begin{DoxyParamCaption}\item[{const Model\+Matrix\+Type \&}]{M,  }\item[{double}]{rigidity\+Min,  }\item[{double}]{rigidity\+Max }\end{DoxyParamCaption})}

Loads M as part of a lens and use it in given rigidity range with rigidities given in Joule \mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a7854f867ce85aed7cf05a4de7e3aae16}\label{classcrpropa_1_1MagneticLens_a7854f867ce85aed7cf05a4de7e3aae16}} 
\index{MagneticLens@{MagneticLens}!transformCosmicRay@{transformCosmicRay}}
\index{transformCosmicRay@{transformCosmicRay}!MagneticLens@{MagneticLens}}
\doxysubsubsection{\texorpdfstring{transformCosmicRay()}{transformCosmicRay()}}
{\footnotesize\ttfamily bool transform\+Cosmic\+Ray (\begin{DoxyParamCaption}\item[{double}]{rigidity,  }\item[{double \&}]{phi,  }\item[{double \&}]{theta }\end{DoxyParamCaption})}

Try to transform the comsic ray to a new direction. Returns false and does not change phi and theta if the cosmic ray is lost due to conservation of cosmic ray flux. Rigidity is given in Joule, phi and theta in rad \mbox{\Hypertarget{classcrpropa_1_1MagneticLens_a162c9d22dd25910cd5e8cc622c943407}\label{classcrpropa_1_1MagneticLens_a162c9d22dd25910cd5e8cc622c943407}} 
\index{MagneticLens@{MagneticLens}!transformModelVector@{transformModelVector}}
\index{transformModelVector@{transformModelVector}!MagneticLens@{MagneticLens}}
\doxysubsubsection{\texorpdfstring{transformModelVector()}{transformModelVector()}}
{\footnotesize\ttfamily void transform\+Model\+Vector (\begin{DoxyParamCaption}\item[{double $\ast$}]{model,  }\item[{double}]{rigidity }\end{DoxyParamCaption}) const}

transforms the model array assuming that model points to an array of the correct size. Rigidity is given in Joule 