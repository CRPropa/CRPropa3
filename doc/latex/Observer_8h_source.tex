\hypertarget{Observer_8h_source}{}\doxysection{Observer.\+h}
\label{Observer_8h_source}\index{Observer.h@{Observer.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef CRPROPA\_OBSERVER\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define CRPROPA\_OBSERVER\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <fstream>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <limits>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}../Candidate.h"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}../Module.h"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}../Referenced.h"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}../Vector3.h"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}../Geometry.h"{}}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacecrpropa}{crpropa}} \{}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{keyword}{enum} DetectionState \{}
\DoxyCodeLine{18         DETECTED, VETO, NOTHING}
\DoxyCodeLine{19 \};}
\DoxyCodeLine{20 }
\DoxyCodeLine{30 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1Referenced}{Referenced}} \{}
\DoxyCodeLine{31 \textcolor{keyword}{protected}:}
\DoxyCodeLine{32         std::string description;}
\DoxyCodeLine{33 \textcolor{keyword}{public}:}
\DoxyCodeLine{34         \textcolor{keyword}{virtual} DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{35         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} onDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{36         \textcolor{keyword}{virtual} std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{37 \};}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 }
\DoxyCodeLine{44 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1Observer}{Observer}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1Module}{Module}} \{}
\DoxyCodeLine{45         std::string flagKey;}
\DoxyCodeLine{46         std::string flagValue;}
\DoxyCodeLine{47 \textcolor{keyword}{private}:}
\DoxyCodeLine{48         std::vector<ref\_ptr<ObserverFeature> > features;}
\DoxyCodeLine{49         \mbox{\hyperlink{classcrpropa_1_1ref__ptr}{ref\_ptr<Module>}} detectionAction;}
\DoxyCodeLine{50         \textcolor{keywordtype}{bool} clone;}
\DoxyCodeLine{51         \textcolor{keywordtype}{bool} makeInactive;}
\DoxyCodeLine{52 \textcolor{keyword}{public}:}
\DoxyCodeLine{55         \mbox{\hyperlink{classcrpropa_1_1Observer_abbd00a8000bd3ee5cd7e35aeb436f937}{Observer}}();}
\DoxyCodeLine{59         \textcolor{keywordtype}{void} \mbox{\hyperlink{classcrpropa_1_1Observer_afa35a046f61698f149b41bd46c0fa2f5}{add}}(\mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} *feature);}
\DoxyCodeLine{64         \textcolor{keywordtype}{void} \mbox{\hyperlink{classcrpropa_1_1Observer_afd250bb55e27b2b31fd2f67434195a0f}{onDetection}}(\mbox{\hyperlink{classcrpropa_1_1Module}{Module}} *action, \textcolor{keywordtype}{bool} clone = \textcolor{keyword}{false});}
\DoxyCodeLine{65         \textcolor{keywordtype}{void} process(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{66         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{67         \textcolor{keywordtype}{void} setFlag(std::string key, std::string value);}
\DoxyCodeLine{71         \textcolor{keywordtype}{void} \mbox{\hyperlink{classcrpropa_1_1Observer_a9309c8d3ead9f5e4023436fa7620ad1b}{setDeactivateOnDetection}}(\textcolor{keywordtype}{bool} deactivate);}
\DoxyCodeLine{72 \};}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 }
\DoxyCodeLine{79 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverDetectAll}{ObserverDetectAll}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{80 \textcolor{keyword}{public}:}
\DoxyCodeLine{81         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{82         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{83 \};}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 }
\DoxyCodeLine{90 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverSurface}{ObserverSurface}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{91 \textcolor{keyword}{private}:}
\DoxyCodeLine{92         \mbox{\hyperlink{classcrpropa_1_1ref__ptr}{ref\_ptr<Surface>}} surface;}
\DoxyCodeLine{93 \textcolor{keyword}{public}:}
\DoxyCodeLine{97         \mbox{\hyperlink{classcrpropa_1_1ObserverSurface_a38aa155adbe5704ae230b0d7631f06b6}{ObserverSurface}}(\mbox{\hyperlink{classcrpropa_1_1Surface}{Surface}}* surface);}
\DoxyCodeLine{98         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{99         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{100 \};}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 }
\DoxyCodeLine{107 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverSmallSphere}{ObserverSmallSphere}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{108 \textcolor{keyword}{private}:}
\DoxyCodeLine{109         \mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} center;}
\DoxyCodeLine{110         \textcolor{keywordtype}{double} radius;}
\DoxyCodeLine{111 \textcolor{keyword}{public}:}
\DoxyCodeLine{116         \mbox{\hyperlink{classcrpropa_1_1ObserverSmallSphere_a909d338be6da3039002178b739671e1e}{ObserverSmallSphere}}(\mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} center = \mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}}(0.), \textcolor{keywordtype}{double} radius = 0);}
\DoxyCodeLine{117         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{118         \textcolor{keywordtype}{void} setCenter(\textcolor{keyword}{const} \mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} \&center);}
\DoxyCodeLine{119         \textcolor{keywordtype}{void} setRadius(\textcolor{keywordtype}{float} radius);}
\DoxyCodeLine{120         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{121 \};}
\DoxyCodeLine{122 }
\DoxyCodeLine{123 }
\DoxyCodeLine{128 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverTracking}{ObserverTracking}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{129 \textcolor{keyword}{private}:}
\DoxyCodeLine{130         \mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} center;}
\DoxyCodeLine{131         \textcolor{keywordtype}{double} radius;}
\DoxyCodeLine{132     \textcolor{keywordtype}{double} stepSize;}
\DoxyCodeLine{133 \textcolor{keyword}{public}:}
\DoxyCodeLine{139         \mbox{\hyperlink{classcrpropa_1_1ObserverTracking_ab5142334f1dc53d066394f52ae792304}{ObserverTracking}}(\mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} center, \textcolor{keywordtype}{double} radius, \textcolor{keywordtype}{double} stepSize = 0);}
\DoxyCodeLine{140         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{141         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{142 \};}
\DoxyCodeLine{143 }
\DoxyCodeLine{144 }
\DoxyCodeLine{149 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverLargeSphere}{ObserverLargeSphere}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{150 \textcolor{keyword}{private}:}
\DoxyCodeLine{151         \mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} center;}
\DoxyCodeLine{152         \textcolor{keywordtype}{double} radius;}
\DoxyCodeLine{153 \textcolor{keyword}{public}:}
\DoxyCodeLine{158         \mbox{\hyperlink{classcrpropa_1_1ObserverLargeSphere_a69f9add3f1e0126b3ae8f43a3894e032}{ObserverLargeSphere}}(\mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}} center = \mbox{\hyperlink{classcrpropa_1_1Vector3}{Vector3d}}(0.), \textcolor{keywordtype}{double} radius = 0);}
\DoxyCodeLine{159         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{160         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{161 \};}
\DoxyCodeLine{162 }
\DoxyCodeLine{163 }
\DoxyCodeLine{171 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverPoint}{ObserverPoint}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{172 \textcolor{keyword}{public}:}
\DoxyCodeLine{173         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{174         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{175 \};}
\DoxyCodeLine{176 }
\DoxyCodeLine{177 }
\DoxyCodeLine{190 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverRedshiftWindow}{ObserverRedshiftWindow}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{191 \textcolor{keyword}{private}:}
\DoxyCodeLine{192         \textcolor{keywordtype}{double} zmin, zmax;}
\DoxyCodeLine{193 \textcolor{keyword}{public}:}
\DoxyCodeLine{198         \mbox{\hyperlink{classcrpropa_1_1ObserverRedshiftWindow_abc0aff4bc2108629b6cf8fced48cc1a2}{ObserverRedshiftWindow}}(\textcolor{keywordtype}{double} zmin = 0, \textcolor{keywordtype}{double} zmax = 0.1);}
\DoxyCodeLine{199         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{200         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{201 \};}
\DoxyCodeLine{202 }
\DoxyCodeLine{203 }
\DoxyCodeLine{208 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverInactiveVeto}{ObserverInactiveVeto}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{209 \textcolor{keyword}{public}:}
\DoxyCodeLine{210         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{211         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{212 \};}
\DoxyCodeLine{213 }
\DoxyCodeLine{214 }
\DoxyCodeLine{219 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverNucleusVeto}{ObserverNucleusVeto}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{220 \textcolor{keyword}{public}:}
\DoxyCodeLine{221         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{222         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{223 \};}
\DoxyCodeLine{224 }
\DoxyCodeLine{225 }
\DoxyCodeLine{230 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverNeutrinoVeto}{ObserverNeutrinoVeto}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{231 \textcolor{keyword}{public}:}
\DoxyCodeLine{232         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{233         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{234 \};}
\DoxyCodeLine{235 }
\DoxyCodeLine{236 }
\DoxyCodeLine{241 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverPhotonVeto}{ObserverPhotonVeto}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{242 \textcolor{keyword}{public}:}
\DoxyCodeLine{243         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{244         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{245 \};}
\DoxyCodeLine{246 }
\DoxyCodeLine{247 }
\DoxyCodeLine{252 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverElectronVeto}{ObserverElectronVeto}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{253 \textcolor{keyword}{public}:}
\DoxyCodeLine{254         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{255         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{256 \};}
\DoxyCodeLine{257 }
\DoxyCodeLine{258 }
\DoxyCodeLine{265 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverParticleIdVeto}{ObserverParticleIdVeto}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{266 \textcolor{keyword}{private}:}
\DoxyCodeLine{267         \textcolor{keywordtype}{int} vetoParticleId;}
\DoxyCodeLine{268 \textcolor{keyword}{public}:}
\DoxyCodeLine{272         \mbox{\hyperlink{classcrpropa_1_1ObserverParticleIdVeto_a1f4a3cf824dec196151ee4f0073cf1ad}{ObserverParticleIdVeto}}(\textcolor{keywordtype}{int} \textcolor{keywordtype}{id});}
\DoxyCodeLine{273         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{274         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{275 \};}
\DoxyCodeLine{276 }
\DoxyCodeLine{277 }
\DoxyCodeLine{283 \textcolor{keyword}{class }\mbox{\hyperlink{classcrpropa_1_1ObserverTimeEvolution}{ObserverTimeEvolution}}: \textcolor{keyword}{public} \mbox{\hyperlink{classcrpropa_1_1ObserverFeature}{ObserverFeature}} \{}
\DoxyCodeLine{284 \textcolor{keyword}{private}:}
\DoxyCodeLine{285         std::vector<double> detList;}
\DoxyCodeLine{286 \textcolor{keyword}{public}:}
\DoxyCodeLine{289         \mbox{\hyperlink{classcrpropa_1_1ObserverTimeEvolution_ac675cf2f529ee90bedfac79e32022b50}{ObserverTimeEvolution}}();}
\DoxyCodeLine{295         \mbox{\hyperlink{classcrpropa_1_1ObserverTimeEvolution_afeb5097e0275278725afb688830f85c4}{ObserverTimeEvolution}}(\textcolor{keywordtype}{double} min, \textcolor{keywordtype}{double} dist, \textcolor{keywordtype}{double} numb);}
\DoxyCodeLine{296         \textcolor{keywordtype}{void} addTime(\textcolor{keyword}{const} \textcolor{keywordtype}{double} \&position);}
\DoxyCodeLine{297         \textcolor{keyword}{const} std::vector<double>\& getTimes() \textcolor{keyword}{const};}
\DoxyCodeLine{298         DetectionState checkDetection(\mbox{\hyperlink{classcrpropa_1_1Candidate}{Candidate}} *candidate) \textcolor{keyword}{const};}
\DoxyCodeLine{299         std::string getDescription() \textcolor{keyword}{const};}
\DoxyCodeLine{300 \};}
\DoxyCodeLine{303 \}}
\DoxyCodeLine{304 }
\DoxyCodeLine{305 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// CRPROPA\_OBSERVER\_H}}

\end{DoxyCode}
